{"version":3,"file":"vs-virtual-keyboard.umd.js","sources":["../src/actions/keyboard-toggle.ts","../src/actions/keyboard-mode-shift.ts","../src/actions/keyboard-typed.ts","../src/actions/index.ts","../src/utils/create-element.ts","../src/components/keyboard.ts","../src/vs-virtual-keyboard.ts"],"sourcesContent":["import KeyboardState from \"../types/kb-state\";\n\n\nexport default (state: KeyboardState, params: any) => {\n  if (!params.input) {\n    return { ...state, input: null };\n  }\n  if ((state.config?.availableInTypes || ['text']).indexOf(params.input.type || '') === -1) {\n    return { ...state };\n  }\n  return { ...state, input: params.input };\n}\n\n","import KeyboardKey from \"../types/kb-key\";\nimport KeyboardState from \"../types/kb-state\";\n\nfunction getLayoutTable(layoutJson: Array<Array<KeyboardKey>>) {\n  return layoutJson.map(l => l.map(symbolKey => {\n    if (typeof symbolKey === 'string') {\n      return { symbol: symbolKey };\n    }\n    return { ...(symbolKey as any) };\n  }))\n}\n\nexport default (state: KeyboardState, params: any) => {\n  state.layoutName = params.layoutName;\n\n  try {\n    state.layout = getLayoutTable(\n      params.layout || state.config?.layouts?.layouts.find(l => l.name === state.layoutName)?.rows\n    );\n  } catch (err) {\n    console.error(err);\n  }\n\n  return {...state};\n}\n","import KeyboardState from \"../types/kb-state\";\n\n\nexport default (state: KeyboardState, params: any) => {\n  return {...state};\n}\n","import kdToggle from './keyboard-toggle';\nimport kdModeShift from './keyboard-mode-shift';\nimport kbTyped from './keyboard-typed';\n\nexport const ACTION_KB_TOGGLE = 0;\nexport const ACTION_MODE_TOGGLE = 2;\nexport const ACTION_KB_TYPED = 3;\n\nconst actions: Map<Number, Function> = new Map<Number, Function>();\n\nactions.set(ACTION_KB_TOGGLE, kdToggle);\nactions.set(ACTION_MODE_TOGGLE, kdModeShift);\nactions.set(ACTION_KB_TYPED, kbTyped);\n\n\nexport default actions;\n","\nexport const h = (tagName: string, classList: string, children: Array<any>, options: any= null) => {\n  const el = document.createElement(tagName);\n  (classList || '').split(' ').forEach(cl => cl && el.classList.add(cl));\n  (children || []).forEach(c => el.appendChild(c));\n  if (!options) {\n    return el;\n  }\n\n  if (typeof options === 'string') {\n    el.textContent = options;\n    return el;\n  }\n\n  Object.keys(options).forEach(o => el.setAttribute(o, options[o]));\n\n  return el;\n}\n","import { ACTION_KB_TYPED, ACTION_MODE_TOGGLE } from '../actions/index';\nimport KeyboardConfig from \"../types/kb-config\";\nimport KeyboardKey from \"../types/kb-key\";\nimport KeyboardState from \"../types/kb-state\";\nimport { h } from \"../utils/create-element\";\n\n\nfunction addKeyboardKeyListener(buttonEl: any, config: KeyboardConfig, action: Function,\n        key: KeyboardKey, state: KeyboardState) {\n\n  let pressedOn: number = 0;\n\n  buttonEl.addEventListener('mousedown', (event: any) => {\n    if (!state.input) {\n      return;\n    }\n    pressedOn = (new Date).getTime();\n  });\n\n  buttonEl.addEventListener('mouseup', (event: any) => setTimeout(() => {\n    if (!state.input) {\n      return;\n    }\n    const pressedTime = (new Date).getTime() - pressedOn;\n    if (pressedTime > (config.modePressedOnTimeout || 2500)) {\n      // TODO\n      return;\n    }\n\n    state.input = state.input || {};\n\n    // Keyup optional listener\n    if (config.onKeyUp) {\n      const newVal = config.onKeyUp(state.input?.value, key);\n      state.input.value = newVal || '';\n    }\n\n    // Keydown optional listener\n    if (config.onKeyDown) {\n      const newVal = config.onKeyDown(state.input?.value, key);\n      state.input.value = newVal || '';\n    }\n\n    // OnChange optional listener\n    if (config.onChange) {\n      const newVal = config.onChange(state.input?.value, key);\n      state.input.value = newVal || '';\n    }\n\n    // Key custom action\n    if (key.action) {\n      const newVal = key.action(state.input?.value);\n      state.input.value = newVal || '';\n      return\n    } else if (key.layoutShift) {\n      // Layout shift key\n      action(ACTION_MODE_TOGGLE, { layoutName: key.layoutShift });\n      return;\n    } else {\n      state.input.value = (state.input.value+'') + key.symbol;\n    }\n\n    action(ACTION_KB_TYPED, {});\n  }, 200));\n}\n\n\nexport default (state: KeyboardState, config: KeyboardConfig, action: Function) => {\n\n  // Gets the default layout for first\n  if (!state.layout) {\n    const layouts: any = config.layouts || {};\n    const layout = layouts.layouts.find((l: any) => l.name === config.layouts?.defaultLayout);\n    action(ACTION_MODE_TOGGLE, {\n      layout: layout.rows,\n      layoutName: config.layouts?.defaultLayout\n    });\n    return h('div', 'vs-virtual-kb', []);\n  }\n\n  // Kb rows format\n  const rows = state.layout.map(l => {\n\n    // Row buttons format\n    const buttons = l.map(kButton => {\n\n      const buttonEl = (() => {\n        // Button with icon\n        if (kButton.base64Icon) {\n          return h('button', 'vs-virtual-kb-row-button-with-icon', [\n            h('img', 'vs-virtual-kb-row-button-with-icon-icon', [], {\n              src: kButton.base64Icon,\n              alt: kButton.symbol\n            })\n          ]);\n        }\n\n        // Common char button\n        if (!state.mode) {\n          return h('button', 'vs-virtual-kb-row-button', [], kButton.symbol);\n        }\n\n        // Button without variations\n        if (!kButton.variations?.length) {\n          return h('button', 'vs-virtual-kb-row-button', [], kButton.symbol);\n        }\n\n        // Button variation\n        const variation = kButton.variations.find(v => v.mode === state.mode);\n        if (!variation) {\n          return h('button', 'vs-virtual-kb-row-button', [], kButton.symbol);\n        }\n\n        // Variation button icon\n        if (variation.key.base64Icon) {\n          return h('button', 'vs-virtual-kb-row-button-with-icon', [\n            h('img', 'vs-virtual-kb-row-button-with-icon-icon', [], {\n              src: kButton.base64Icon,\n              alt: kButton.symbol\n            })\n          ]);\n        }\n\n        // Variation symbol\n        return h('button', 'vs-virtual-kb-row-button', [], variation.key.symbol);\n      })();\n\n      // Applies key specific class\n      let hash;\n      try {\n        hash = btoa(kButton.symbol);\n      } catch (err) {\n        hash = encodeURIComponent(kButton.symbol);\n      }\n      buttonEl.classList.add(`vs-virtual-kb-key-${hash.split('=').join('')}`);\n\n      // Adding click listeners\n      addKeyboardKeyListener(buttonEl, config, action, kButton, state);\n\n      return buttonEl;\n    });\n\n    // Row buttons div\n    return h('div', 'vs-virtual-kb-row', buttons);\n  });\n\n  return h('div', `vs-virtual-kb ${\n    config.wrpClass || ''\n  } ${\n    state.input ? 'vs-virtual-kb-opened' : 'vs-virtual-kb-closed'\n  }`, rows);\n}\n","import {default as actions, ACTION_KB_TOGGLE, ACTION_MODE_TOGGLE} from \"./actions\";\nimport keyboard from \"./components/keyboard\";\nimport KeyboardConfig from \"./types/kb-config\";\nimport KeyboardState from \"./types/kb-state\";\n\nlet keyboardEl: any;\n\n(window as any).VsVirtualKeyboard = (options: KeyboardConfig) => {\n  const config: KeyboardConfig = {...options};\n\n  // Initial state\n  let currentState: KeyboardState = { config };\n\n  /**\n   * Application renderer\n   */\n  const render = (state: KeyboardState) => {\n    currentState = state;\n    const newEl = keyboard(state, config, (actionId: number, params: any) => {\n      const action = actions.get(actionId);\n      if (!action) {\n        console.warn(`${actionId} NOT EXISTS`);\n        return;\n      }\n      let newState: KeyboardState = action(state, params);\n      if (config.interceptor) {\n        let stateChanged = config.interceptor({...newState});\n        if (stateChanged.layoutName !== newState.layoutName) {\n          const action = actions.get(ACTION_MODE_TOGGLE);\n          if (action) {\n            stateChanged = action(newState, { layoutName: stateChanged.layoutName });\n          }\n        }\n        newState = stateChanged || newState;\n      }\n      render(newState);\n    });\n    keyboardEl ? keyboardEl.replaceWith(newEl) : document.body.appendChild(newEl);\n    keyboardEl = newEl;\n    newEl.addEventListener('click', event => {\n      event.preventDefault();\n      if (state.input) {\n        state.input.focus();\n      }\n    });\n  };\n\n  /**\n   * Focus-in and Focus-out input and toggle keyboard\n   */\n  let focusOutTimeout: any;\n  window.addEventListener('focusin', (event: any) => {\n    focusOutTimeout && clearTimeout(focusOutTimeout);\n    const action = actions.get(ACTION_KB_TOGGLE);\n    if (action) {\n      setTimeout(() => {\n        const state: KeyboardState = action(currentState, { input: event.target });\n        render(state);\n      }, 100);\n    }\n  });\n  window.addEventListener('focusout', () => {\n    // focusOutTimeout = setTimeout(() => {\n    //   const action = actions.get(ACTION_KB_TOGGLE);\n    //   if (action) {\n    //     const state: KeyboardState = action(currentState, { input: null });\n    //     render(state);\n    //   }\n    // }, 600);\n  });\n\n  // First render\n  render(currentState);\n}\n\n"],"names":[],"mappings":"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"}
{"version":3,"file":"vs-virtual-keyboard.es5.js","sources":["../src/actions/keyboard-toggle.ts","../src/actions/keyboard-mode-shift.ts","../src/actions/keyboard-typed.ts","../src/actions/index.ts","../src/utils/create-element.ts","../src/components/keyboard.ts","../src/vs-virtual-keyboard.ts"],"sourcesContent":["import KeyboardState from \"../types/kb-state\";\n\n\nexport default (state: KeyboardState, params: any) => {\n  if (!params.input) {\n    return { ...state, input: null };\n  }\n  if ((state.config?.availableInTypes || ['text']).indexOf(params.input.type || '') === -1) {\n    return { ...state };\n  }\n  return { ...state, input: params.input };\n}\n\n","import KeyboardKey from \"../types/kb-key\";\nimport KeyboardState from \"../types/kb-state\";\n\nfunction getLayoutTable(layoutJson: Array<Array<KeyboardKey>>) {\n  return layoutJson.map(l => l.map(symbolKey => {\n    if (typeof symbolKey === 'string') {\n      return { symbol: symbolKey };\n    }\n    return { ...(symbolKey as any) };\n  }))\n}\n\nexport default (state: KeyboardState, params: any) => {\n  state.layoutName = params.layoutName;\n\n  try {\n    state.layout = getLayoutTable(\n      params.layout || state.config?.layouts?.layouts.find(l => l.name === state.layoutName)?.rows\n    );\n  } catch (err) {\n    console.error(err);\n  }\n\n  return {...state};\n}\n","import KeyboardState from \"../types/kb-state\";\n\n\nexport default (state: KeyboardState, params: any) => {\n  return {...state};\n}\n","import kdToggle from './keyboard-toggle';\nimport kdModeShift from './keyboard-mode-shift';\nimport kbTyped from './keyboard-typed';\n\nexport const ACTION_KB_TOGGLE = 0;\nexport const ACTION_MODE_TOGGLE = 2;\nexport const ACTION_KB_TYPED = 3;\n\nconst actions: Map<Number, Function> = new Map<Number, Function>();\n\nactions.set(ACTION_KB_TOGGLE, kdToggle);\nactions.set(ACTION_MODE_TOGGLE, kdModeShift);\nactions.set(ACTION_KB_TYPED, kbTyped);\n\n\nexport default actions;\n","\nexport const h = (tagName: string, classList: string, children: Array<any>, options: any= null) => {\n  const el = document.createElement(tagName);\n  (classList || '').split(' ').forEach(cl => cl && el.classList.add(cl));\n  (children || []).forEach(c => el.appendChild(c));\n  if (!options) {\n    return el;\n  }\n\n  if (typeof options === 'string') {\n    el.textContent = options;\n    return el;\n  }\n\n  Object.keys(options).forEach(o => el.setAttribute(o, options[o]));\n\n  return el;\n}\n","import { ACTION_KB_TYPED, ACTION_MODE_TOGGLE } from '../actions/index';\nimport KeyboardConfig from \"../types/kb-config\";\nimport KeyboardKey from \"../types/kb-key\";\nimport KeyboardState from \"../types/kb-state\";\nimport { h } from \"../utils/create-element\";\n\n\nfunction addKeyboardKeyListener(buttonEl: any, config: KeyboardConfig, action: Function,\n        key: KeyboardKey, state: KeyboardState) {\n\n  let pressedOn: number = 0;\n\n  buttonEl.addEventListener('mousedown', (event: any) => {\n    if (!state.input) {\n      return;\n    }\n    pressedOn = (new Date).getTime();\n  });\n\n  buttonEl.addEventListener('mouseup', (event: any) => setTimeout(() => {\n    if (!state.input) {\n      return;\n    }\n    const pressedTime = (new Date).getTime() - pressedOn;\n    if (pressedTime > (config.modePressedOnTimeout || 2500)) {\n      // TODO\n      return;\n    }\n\n    state.input = state.input || {};\n\n    // Keyup optional listener\n    if (config.onKeyUp) {\n      const newVal = config.onKeyUp(state.input?.value, key);\n      state.input.value = newVal || '';\n    }\n\n    // Keydown optional listener\n    if (config.onKeyDown) {\n      const newVal = config.onKeyDown(state.input?.value, key);\n      state.input.value = newVal || '';\n    }\n\n    // OnChange optional listener\n    if (config.onChange) {\n      const newVal = config.onChange(state.input?.value, key);\n      state.input.value = newVal || '';\n    }\n\n    // Key custom action\n    if (key.action) {\n      const newVal = key.action(state.input?.value);\n      state.input.value = newVal || '';\n      return\n    } else if (key.layoutShift) {\n      // Layout shift key\n      action(ACTION_MODE_TOGGLE, { layoutName: key.layoutShift });\n      return;\n    } else {\n      state.input.value = (state.input.value+'') + key.symbol;\n    }\n\n    action(ACTION_KB_TYPED, {});\n  }, 200));\n}\n\n\nexport default (state: KeyboardState, config: KeyboardConfig, action: Function) => {\n\n  // Gets the default layout for first\n  if (!state.layout) {\n    const layouts: any = config.layouts || {};\n    const layout = layouts.layouts.find((l: any) => l.name === config.layouts?.defaultLayout);\n    action(ACTION_MODE_TOGGLE, {\n      layout: layout.rows,\n      layoutName: config.layouts?.defaultLayout\n    });\n    return h('div', 'vs-virtual-kb', []);\n  }\n\n  // Kb rows format\n  const rows = state.layout.map(l => {\n\n    // Row buttons format\n    const buttons = l.map(kButton => {\n\n      const buttonEl = (() => {\n        // Button with icon\n        if (kButton.base64Icon) {\n          return h('button', 'vs-virtual-kb-row-button-with-icon', [\n            h('img', 'vs-virtual-kb-row-button-with-icon-icon', [], {\n              src: kButton.base64Icon,\n              alt: kButton.symbol\n            })\n          ]);\n        }\n\n        // Common char button\n        if (!state.mode) {\n          return h('button', 'vs-virtual-kb-row-button', [], kButton.symbol);\n        }\n\n        // Button without variations\n        if (!kButton.variations?.length) {\n          return h('button', 'vs-virtual-kb-row-button', [], kButton.symbol);\n        }\n\n        // Button variation\n        const variation = kButton.variations.find(v => v.mode === state.mode);\n        if (!variation) {\n          return h('button', 'vs-virtual-kb-row-button', [], kButton.symbol);\n        }\n\n        // Variation button icon\n        if (variation.key.base64Icon) {\n          return h('button', 'vs-virtual-kb-row-button-with-icon', [\n            h('img', 'vs-virtual-kb-row-button-with-icon-icon', [], {\n              src: kButton.base64Icon,\n              alt: kButton.symbol\n            })\n          ]);\n        }\n\n        // Variation symbol\n        return h('button', 'vs-virtual-kb-row-button', [], variation.key.symbol);\n      })();\n\n      // Applies key specific class\n      let hash;\n      try {\n        hash = btoa(kButton.symbol);\n      } catch (err) {\n        hash = encodeURIComponent(kButton.symbol);\n      }\n      buttonEl.classList.add(`vs-virtual-kb-key-${hash.split('=').join('')}`);\n\n      // Adding click listeners\n      addKeyboardKeyListener(buttonEl, config, action, kButton, state);\n\n      return buttonEl;\n    });\n\n    // Row buttons div\n    return h('div', 'vs-virtual-kb-row', buttons);\n  });\n\n  return h('div', `vs-virtual-kb ${\n    config.wrpClass || ''\n  } ${\n    state.input ? 'vs-virtual-kb-opened' : 'vs-virtual-kb-closed'\n  }`, rows);\n}\n","import {default as actions, ACTION_KB_TOGGLE, ACTION_MODE_TOGGLE} from \"./actions\";\nimport keyboard from \"./components/keyboard\";\nimport KeyboardConfig from \"./types/kb-config\";\nimport KeyboardState from \"./types/kb-state\";\n\nlet keyboardEl: any;\n\n(window as any).VsVirtualKeyboard = (options: KeyboardConfig) => {\n  const config: KeyboardConfig = {...options};\n\n  // Initial state\n  let currentState: KeyboardState = { config };\n\n  /**\n   * Application renderer\n   */\n  const render = (state: KeyboardState) => {\n    currentState = state;\n    const newEl = keyboard(state, config, (actionId: number, params: any) => {\n      const action = actions.get(actionId);\n      if (!action) {\n        console.warn(`${actionId} NOT EXISTS`);\n        return;\n      }\n      let newState: KeyboardState = action(state, params);\n      if (config.interceptor) {\n        let stateChanged = config.interceptor({...newState});\n        if (stateChanged.layoutName !== newState.layoutName) {\n          const action = actions.get(ACTION_MODE_TOGGLE);\n          if (action) {\n            stateChanged = action(newState, { layoutName: stateChanged.layoutName });\n          }\n        }\n        newState = stateChanged || newState;\n      }\n      render(newState);\n    });\n    keyboardEl ? keyboardEl.replaceWith(newEl) : document.body.appendChild(newEl);\n    keyboardEl = newEl;\n    newEl.addEventListener('click', event => {\n      event.preventDefault();\n      if (state.input) {\n        state.input.focus();\n      }\n    });\n  };\n\n  /**\n   * Focus-in and Focus-out input and toggle keyboard\n   */\n  let focusOutTimeout: any;\n  window.addEventListener('focusin', (event: any) => {\n    focusOutTimeout && clearTimeout(focusOutTimeout);\n    const action = actions.get(ACTION_KB_TOGGLE);\n    if (action) {\n      setTimeout(() => {\n        const state: KeyboardState = action(currentState, { input: event.target });\n        render(state);\n      }, 100);\n    }\n  });\n  window.addEventListener('focusout', () => {\n    // focusOutTimeout = setTimeout(() => {\n    //   const action = actions.get(ACTION_KB_TOGGLE);\n    //   if (action) {\n    //     const state: KeyboardState = action(currentState, { input: null });\n    //     render(state);\n    //   }\n    // }, 600);\n  });\n\n  // First render\n  render(currentState);\n}\n\n"],"names":[],"mappings":"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"}